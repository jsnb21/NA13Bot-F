<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Client Chat</title>
  <style>body{font-family:Arial;margin:20px}label{display:block;margin-top:8px}textarea{width:100%;height:100px}</style>
</head>
<body>
  <h2>Customer Chat</h2>
  <label>API Key (or leave blank and set Restaurant ID header)<input id="api_key" style="width:400px" /></label>
  <label>Restaurant ID <input id="restaurant_id" /></label>

  <label>Query<textarea id="query"></textarea></label>
  <button id="send">Send</button>
  <pre id="out"></pre>

  <script>
    document.getElementById('send').addEventListener('click', async ()=>{
      const apiKey = document.getElementById('api_key').value.trim();
      const restaurant_id = document.getElementById('restaurant_id').value.trim();
      const query = document.getElementById('query').value.trim();
      if (!query) return alert('query required');
      const headers = {'Content-Type':'application/json'};
      if (apiKey) headers['X-API-Key'] = apiKey;
      else if (restaurant_id) headers['X-Restaurant-Id'] = restaurant_id;
      const r = await fetch('/client-api/v1/chat', {
        method:'POST', headers, body: JSON.stringify({query})
      });
      const data = await r.json();
      document.getElementById('out').textContent = JSON.stringify(data, null, 2);
    });
  </script>
</body>
</html>