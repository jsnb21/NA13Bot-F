{% extends 'base/base.html' %}

{% block title %}AI Training ‚Äî Resto Admin{% endblock %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/ai-training.css')}}">
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="ai-header">
        <h2>AI Training Data Management</h2>
        <p>Upload training files and knowledge bases to enhance your AI agent's responses</p>
    </div>

    <div class="row mb-4">
        <div class="col-md-8">
            <div class="card-surface mb-4">
                <h5 class="mb-4">Upload Training Files</h5>
                
                <div class="upload-section" id="uploadZone">
                    <div class="upload-icon">üìÅ</div>
                    <h5>Drag & Drop Files Here</h5>
                    <p style="color:#666; margin-bottom:20px;">or click to browse your computer</p>
                    <div class="file-input-wrapper">
                        <button class="btn btn-primary" style="background:#667eea; border:none;">Choose Files</button>
                        <input type="file" id="trainingFiles" multiple accept=".txt,.pdf,.docx,.json,.csv">
                    </div>
                    <p style="color:#999; font-size:0.85rem; margin-top:20px;">Supported formats: TXT, PDF, DOCX, JSON, CSV</p>
                </div>

                <div id="uploadProgress" style="display:none; margin-top:20px;">
                    <div class="progress">
                        <div class="progress-bar" id="progressBar" role="progressbar" style="width:0%"></div>
                    </div>
                    <small class="text-muted">Uploading... <span id="progressText">0%</span></small>
                </div>
            </div>

            <div class="card-surface">
                <h5 class="mb-4">Uploaded Training Files</h5>
                
                <div id="filesList">
                    <div class="training-file-item">
                        <div class="file-info">
                            <div class="file-name">üìÑ restaurant-menu.json</div>
                            <div class="file-meta">Uploaded 2 days ago ‚Ä¢ 245 KB ‚Ä¢ Active</div>
                        </div>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span class="training-status status-complete">Trained</span>
                            <button class="btn btn-sm btn-outline-danger">Remove</button>
                        </div>
                    </div>

                    <div class="training-file-item">
                        <div class="file-info">
                            <div class="file-name">üìÑ faq-responses.txt</div>
                            <div class="file-meta">Uploaded 5 days ago ‚Ä¢ 128 KB ‚Ä¢ Active</div>
                        </div>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span class="training-status status-complete">Trained</span>
                            <button class="btn btn-sm btn-outline-danger">Remove</button>
                        </div>
                    </div>

                    <div class="training-file-item">
                        <div class="file-info">
                            <div class="file-name">üìÑ customer-support.pdf</div>
                            <div class="file-meta">Uploaded today ‚Ä¢ 512 KB ‚Ä¢ Processing</div>
                        </div>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span class="training-status status-training">Training</span>
                            <button class="btn btn-sm btn-outline-secondary" disabled>Remove</button>
                        </div>
                    </div>
                </div>

                <div style="margin-top:20px; padding-top:20px; border-top:1px solid #eee;">
                    <button class="btn btn-secondary" style="background:#667eea; border:none; margin-right:10px;">Retrain All Models</button>
                    <button class="btn btn-outline-secondary">Export Training Data</button>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">3</div>
                    <div class="stat-label">Files Uploaded</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">885 KB</div>
                    <div class="stat-label">Total Size</div>
                </div>
            </div>

            <div class="info-box">
                <h5>Training File Guidelines</h5>
                <ul>
                    <li><strong>TXT Files:</strong> Plain text data, Q&A pairs, or knowledge base</li>
                    <li><strong>JSON Files:</strong> Structured data with menu items, FAQs, or responses</li>
                    <li><strong>CSV Files:</strong> Tabular data like inventory, pricing, hours</li>
                    <li><strong>PDF/DOCX:</strong> Documents with training content</li>
                </ul>
            </div>

            <div class="info-box" style="border-left-color:#ff6b6b;">
                <h5 style="color:#ff6b6b;">Best Practices</h5>
                <ul style="margin-bottom:0;">
                    <li>Use clear, consistent formatting</li>
                    <li>Include context for Q&A pairs</li>
                    <li>Update files regularly</li>
                    <li>Keep file sizes under 50MB</li>
                    <li>Avoid duplicate content</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="card-surface mb-4">
        <h5 class="mb-3">Example Training File Formats</h5>
        
        <div class="row">
            <div class="col-md-6">
                <h6>JSON Format (Recommended)</h6>
                <div class="code-example">{
  "restaurant": {
    "name": "Resto",
    "menu": [
      {
        "item": "Margherita Pizza",
        "price": "$12.99",
        "description": "Fresh tomato and basil"
      }
    ]
  }
}</div>
            </div>
            <div class="col-md-6">
                <h6>Q&A Format (TXT)</h6>
                <div class="code-example">Q: What are your hours?
A: We're open 10am-10pm daily

Q: Do you deliver?
A: Yes, delivery available within 5 miles

Q: Any vegetarian options?
A: Yes, check our full menu for marked items</div>
            </div>
        </div>
    </div>

    <div class="card-surface">
        <h5 class="mb-3">Training Status & History</h5>
        <table class="table mb-0">
            <thead style="background:#f8f9fa;">
                <tr>
                    <th>Date</th>
                    <th>Action</th>
                    <th>Status</th>
                    <th>Duration</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Jan 27, 2026</td>
                    <td>File upload: customer-support.pdf</td>
                    <td><span class="badge bg-warning">In Progress</span></td>
                    <td>2 min 30 sec</td>
                </tr>
                <tr>
                    <td>Jan 25, 2026</td>
                    <td>Retrain all models</td>
                    <td><span class="badge bg-success">Completed</span></td>
                    <td>5 min 12 sec</td>
                </tr>
                <tr>
                    <td>Jan 22, 2026</td>
                    <td>File upload: faq-responses.txt</td>
                    <td><span class="badge bg-success">Completed</span></td>
                    <td>1 min 45 sec</td>
                </tr>
                <tr>
                    <td>Jan 20, 2026</td>
                    <td>File upload: restaurant-menu.json</td>
                    <td><span class="badge bg-success">Completed</span></td>
                    <td>3 min 08 sec</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="{{ url_for('static', filename='js/ai-training.js')}}"></script>
{% endblock %}
